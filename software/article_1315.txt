Система HPE StoreVirtual VSA обеспечивает гибкую и экономичную защиту данных для бизнеса.
Программно-определяемые хранилища (в дальнейшем — SDS) считаются следующей вехой в развитии технологий хранения данных. Эта технология является новичком на рынке, поэтому однозначного и точного определения данному термину пока нет. Похожая ситуация присутствовала на заре «облаков», когда этим термином называли всё подряд, не особенно вникая в его значение. По аналогии с упомянутыми «облаками», основная идея SDS заключается в абстрагировании от аппаратной составляющей и приходу к бизнес-ориентированной модели построения систем хранения и обработки.
Сейчас же, в большинстве случаев, речь идёт о программной виртуализации хранилищ данных. При этом говорят не о подмене одного СХД другим за счёт встроенных функций или аппаратных шлюзов, а о виртуализации локальных дисков вычислительных узлов клиента.
Архитектура HPE StoreVirtual VSA
HPE VSA является программным продуктом, устанавливаемым в узлы виртуального кластера. На текущий момент им поддерживаются продукты VMware vSphere, Microsoft Hyper-V, и KVM. Для vSphere и Hyper-V существуют плагины для интеграции с их консолями управления, что позволяет управлять всей инфраструктурой из единой точки.
Для типового развертывания HPE StoreVirtual VSA необходимо 3 узла — два узла для отказоустойчивости и третий для размещения Quorum Witness, который будет отвечать за консистентность данных на всех узлах в случае разрыва связи. Возможен сценарий с использованием только двух узлов, однако в этом случае необходима независимая NFSv3 служба файлового хранилища для размещения Quorum Witness.
С точки зрения администратора виртуального кластера, StoreVirtual VSA представляет собой виртуальные машины под управлением Enterprise Linux, по одной на каждый узел кластера. Установка может быть произведена как через специальный визард, так и путем развертывания OVF-образа. В обоих случаях пользователю будет необходимо сконфигурировать диск создаваемой виртуальной машины. Размер виртуального диска будет зависеть от размера блока, указанного при форматировании хранилища данных.
Как и любое ПО, StoreVirtual VSA требует вычислительные ресурсы процессора и оперативной памяти, и для разработки нового решения (или для проверки совместимости с имеющимся кластером) специалисты HPE выработали ряд рекомендаций:
Лицензируется данный продукт по объёму, который мы выделяем гипервизору в качестве хранилища данных. Важно понимать, что это будет «сырой» объём с точки зрения конечного пользователя. В первую очередь локальные диски ваших серверов будут объединены в RAID-группы на уровне RAID-контроллера узла. Получившийся полезный объём и будет лицензироваться. После запуска каждой отдельной VSA они объединяются в кластер и суммируют дисковое пространство в один общий пул, доступный потом пользователям (серверам) по блочному протоколу (iSCSI).
Возможности HPE StoreVirtual VSA
В наше время недостаточно просто предоставить некую ёмкость для хранения данных. Система хранения должна обладать возможностями по защите данных от сбоев, оптимизацией хранения, управления и обработки, и StoreVirtual VSA может предложить нам все основные функции, которые присутствуют у аппаратных систем хранения:
Thin provisioning — «тонкие» тома, позволяющие системе выделять пространство по мере фактического наполнения данными;
Peer Motion — миграция томов без прерывания доступа к ним;
Multi-site SAN—- распределенный по двум или трем площадкам единый том;
Синхронная и асинхронная репликации;
Создание консистентных снэпшотов на уровне приложений;
Network RAID — построение отказоустойчивых схем на уровне узлов кластера;
Split Site — создание географически разнесенных кластеров;
Adaptive Optimization — двухуровневый автоматический тиринг с гранулярностью 256 Kбайт.
Управление всеми функциями доступно как через CMC (Centralized Management Console), так и через плагин для консолей управления VMWare/Hyper-V.
Наиболее интересной опцией будет являться Network RAID, защищающий данные от потери в случае выхода из строя целого узла кластера. По сути, это синхронная репликация между узлами, а уровень RAID регулирует количество копий блоков данных, хранящихся в кластере.
К примеру, в случае с уровнем Network RAID level 10, рекомендованным производителем в качестве самого оптимального, в кластере всегда будут храниться 2 копии каждого блока данных. Такая схема резервирования дает гарантированную защиту от потери данных в случае выхода из строя первого узла кластера (а при особой удаче — до половины узлов), однако оверхед будет составлять 1/2. Это означает, что при покупке лицензии на StoreVirtual VSA 2 Тбайт, мы получим виртуальное хранилище на 1 Тбайт полезной ёмкости.
Следующий уровень защиты — Network RAID level 10+1. В этом случае в кластере хранится 3 копии каждого блока данных. Допустимый уровень «потерь» — 2 узла. Оверхед будет составлять 1/3. Именно алгоритм резервирования Network RAID 10+1 лежит в основе технологии SplitSite, позволяя создавать кластер на трёх географически разнесенных площадках. Самое примечательное в этой технологии то, что в отличие от классической репликации аппаратных СХД у нас отсутствуют такие понятия как основная и второстепенная площадки. Приложению не важно, на какой из площадок в данный момент располагается обрабатываемый блок, а в случае выхода из строя узла и обращения к дублирующему блоку на другой площадке, приложение не замечает разницы и, как следствие, отсутствует время простоя. С другой стороны, это накладывает жёсткие требования на канал, соединяющий площадки между собой. Задержка в передаче данных (round trip) не должна превышать 5 мс.
Уровень Network RAID level 10+2 создает копии блоков на всех узлах кластера, что позволяет нам потерять n-1 узлов, но при этом оврехед будет равняться 1/n (где n — количество узлов в кластере). При этом минимально поддерживаемая конфигурация— от 3-х узлов, что является чрезмерным и не применимо в реальных архитектурах.
По аналогии с аппаратными рейдами имеются уровни резервирования с контрольными суммами: Network RAID level 5 и 6. В этих архитектурах появляются блоки с контрольными суммами, которые равномерно распределены по всем узлам кластера. Такая схема резервирования является наиболее экономичной с точки зрения оверхеда (n-1 для level 5 и n-2 для level 6), а уровень отказоустойчивости равен level 10 и level 10+1 соответственно. Однако, необходимость считать контрольные суммы ведёт к ощутимому снижению вычислительной производительности всего кластера, вследствие чего такие уровни не рекомендуются для применения с высоконагруженными приложениями (самый явный пример — базы данных).
Позиционирование
Продукт StoreVirtual VSA входит в семейство решений гиперконвергентных систем. И, как и любая другая софтверная составляющая гиперковнергентных решений, является бюджетным аналогом своего аппаратного оригинала — выделенной СХД. Основная задача данного продукта — создание отказоустойчивого защищенного хранилища для вашего виртуализированного кластера без покупки дополнительного оборудования. При этом не стоит недооценивать функциональность Network RAID, позволяющую реализовывать синхронную репликацию между узлами кластера, в том числе и географически разнесенных.
Как можно увидеть из описания, данное решение можно назвать функционально самостоятельным, дающим своим пользователям возможности аппаратного хранилища начального уровня за более скромные деньги.
В заключение стоит отметить, что на текущий момент действует промо-программа HPE: при покупке любого сервера HPE Proliant Gen9 вы получаете лицензию StoreVirtual VSA на 1 Тбайт бесплатно. Это является прекрасным поводом не только скачать пробную версию для детального изучения продукта, но и начать внедрять его в новых проектах без увеличения их бюджета.
На правах рекламы